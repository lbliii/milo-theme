<nav id="topNav" class="sticky top-0 z-50 py-2 bg-white">
    <div class="max-w-screen-xl 2xl:max-w-screen-2xl mx-auto">
        <div id="topNavItemsContainer" class="flex space-x-2">
            <!-- Logo -->
            <!-- Links -->
            <div id="topNavLinks" class="hidden md:flex items-center space-x-2 text-black transition duration-300">
                <a href="/">Home</a>
                <!-- Dropdown -->
                <div id="topNavPrimaryDropdown" class="relative group z-50">
                    <a href="/products" class="">Products</a>
                    <div class="absolute left-0 mt-0 w-48 bg-white border border-gray-200 rounded-md overflow-hidden shadow-lg group-hover:block hidden">
                        <a href="/">Example</a>
                    </div>
                </div>
            </div>
            <!-- Searchbar -->
            <div id="topNavSearch" class="flex items-center space-x-2 text-xs">
                <input type="search" id="searchInput" class="border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-brand md:w-96" placeholder="Search..." aria-label="Search" />
                <div class="bg-zinc-100 px-2 py-1 text-black text-xs relative right-10 rounded border-solid border border-gray-200">/</div>
            </div>
            <div id="topNavEnd" class="flex flex-grow justify-end">
                <!-- Dark Mode -->
                <div class="hidden md:flex items-center">
                    <button id="chatTocToggle"><img src="/icons/toggle-left.svg" class="mr-4"></button>
                    <button id="darkModeToggle"><img src="/icons/light.svg"></button>
                </div>
            </div>
        </div>
    </div>
</nav>

<script>
document.addEventListener("DOMContentLoaded", function (event) {
    const chatTocToggle = document.getElementById("chatTocToggle");
    const chatContainer = document.getElementById("chatContainer");
    const tocContainer = document.getElementById("tocContainer");

    // Check if chatTocSettings in user's local storage is set; if not set or value is 'chat', toggle hidden on chatContainer; if value is 'toc', toggle the tocContainer
    const chatTocSettings = localStorage.getItem("chatTocSettings");
    if (chatTocSettings === null || chatTocSettings === 'chat') {
        chatContainer.classList.remove("hidden");
        tocContainer.classList.add("hidden");
    } else if (chatTocSettings === 'toc') {
        chatContainer.classList.add("hidden");
        tocContainer.classList.remove("hidden");
    }

    // Update the button content based on the visibility of chatContainer
    updateButtonContent();

    // Add a click event listener to the chatTocToggle button
    chatTocToggle.addEventListener("click", function () {
        // Toggle both the chatContainer and tocContainer visibility
        chatContainer.classList.toggle("hidden");
        tocContainer.classList.toggle("hidden");

        // Update the preference and button content based on the visibility of chatContainer
        if (!chatContainer.classList.contains("hidden")) {
            localStorage.setItem("chatTocSettings", "chat");
        } else {
            localStorage.setItem("chatTocSettings", "toc");
        }

        // Update the button content after toggling
        updateButtonContent();
    });

    // Function to update the button content based on the visibility of chatContainer
    function updateButtonContent() {
        const isChatVisible = !chatContainer.classList.contains("hidden");
        chatTocToggle.innerHTML = isChatVisible
            ? '<img src="/icons/toggle-right.svg" class="mr-4">'
            : '<img src="/icons/toggle-left.svg" class="mr-4">';
    }
});
</script>

