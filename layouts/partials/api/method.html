{{/*  Method expects a context with:
    - .reference: a reference to the whole api spec
    - .path: the path of the endpoint these methods belong to
    - .method: the method that belongs to the path
    - .details: the details of the method
*/}}

{{$reference := .reference }}
{{$path := .path }}
{{$method := .method }}
{{$details := .details }}

{{- $bg := "" -}}
{{- if eq .method "get" }}
    {{- $bg = "bg-green-100" }}
{{- else if eq .method "post" }}
    {{- $bg = "bg-blue-100" }}
{{- else if eq .method "put" }}
    {{- $bg = "bg-yellow-100" }}
{{- else if eq .method "delete" }}
    {{- $bg = "bg-red-100" }}
{{- end }}
<div id="{{.path}}-{{.method}}-method" class="pl-2 space-y-2">
    <div class="flex items-center space-x-2">
        <div class="text-lg font-bold p-1 rounded {{$bg}}">{{ .method | upper }}</div>
        <span class="font-thin">{{ .details.summary }}</span>
    </div>
    <p class="text-sm">{{.details.description | markdownify }}</p>

    {{$context := dict "reference" $reference "path" $path "method" $method "details" $details }}
    {{partial "api/security.html" $context }}
    {{partial "api/parameters.html" $context }}
    {{partial "api/responses.html" $context }}
</div>
