{{- $details := .details }}
{{- $schemas := .reference.components.schemas }}

{{- with $details.responses}}
<h4>Responses</h4>
<div class="space-y-2">
    {{- range $statusCode, $response := . }}
    {{- $bg := "" }}
    {{- if or (eq $statusCode "200") (eq $statusCode "204") }}
        {{- $bg = "bg-green-100" }}
    {{- else }}
        {{- $bg = "bg-red-100" }}
    {{- end }}
    <div class="flex flex-col">
        <h5 class="{{$bg}} p-2 rounded">{{ $statusCode }}</h5>
        {{- with (index $response.content "application/json").schema }}
        <div class="p-2 space-y-2">
            {{- $response.description }} 
            {{- if eq .type "array"}}
            (<span class="text-xs">{{ .type }}</span>)
                {{- with .items}}
                    {{- range $ref, $value := . }}
                    {{ $path := strings.TrimPrefix "#/components/schemas/" $value }} <!-- example: components/schemas/Item  -->
                    {{- with (index $schemas $path) }}
                    {{$componentContext := dict "schemaName" $path "schema" . "nested" true }}
                    {{- partial "api/component.html" $componentContext }}
                    {{- end }}
                    {{- end }}
                {{- end }}
            {{- end }}
        </div>
        {{- end }}
    </div>
    {{- end }}
</div>
{{- end }}
