{{- $schemas := .schemas -}}
{{- $schema := .schema -}}

{{- if reflect.IsMap $schema -}}
<div class="bg-blue-100 p-2 rounded">
    {{- if $schema.type }}
    <p class="font-bold">{{ $schema.type }}</p>
    {{- end }}
    <ul class="space-y-2">
        {{- range $key, $schemaItem := $schema.properties }}
        <li class="space-y-1">
            <span class="font-medium">{{ $key }}</span>
            <!-- Here we call the same partial recursively for nested properties -->
            {{- $nestedContext := dict "schema" $schemaItem "schemas" $schemas }}
            {{- partial "api/schema-display.html" $nestedContext }}
        </li>
        {{- end }}
    </ul>
</div>
{{- else if reflect.IsString $schema -}}
    {{- $refPath := strings.TrimPrefix "#/components/schemas/" $schema }}
    {{- with (index $schemas $refPath) }}
        {{- $refContext := dict "schema" . "schemas" $schemas }}
        {{- partial "api/schema-display.html" $refContext }}
    {{- end }}
{{- end }}
